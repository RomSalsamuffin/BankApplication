# Проект "BankApplication"

## Описание
Проект "BankApplication" предназначен для управления 
данными банковских аккаунтов и счетов.

## Установка:

1. Клонируйте репозиторий:
```
git clone https://github.com/RomSalsamuffin/BankApplication.git
```
## Структура
### Директория data
Содержит файлы данных, необходимые для работы приложения

### Директория logs
Директория для хранения файлов логов

### Пакет src
Содержит модули для обработки данных банковских аккаунтов и счетов
#### Модуль config:
Содержит переменные, необходимые для работы модулей приложения (путь к рабочей директории)

#### Модуль csv_excel:
* Функция get_transactions_csv - функция, получающая данные о транзакциях из csv-файла
```
входной аргумент csv_path: - путь к csv-файлу
возвращаемое значение - список словарей, представляющих собой транзакции
```
* Функция get_transactions_excel - функция, получающая данные о транзакциях из excel-файла
```
входной аргумент excel_path: - путь к excel-файлу
возвращаемое значение - список словарей, представляющих собой транзакции
```

#### Модуль decorators:
* Декоратор log - предназначен для логирования работы декорированной функции, параметров и результата ее выполнения 
Декоратор имеет один параметр filename: необязательный параметр, определяющий имя файла лога для записи

#### Модуль external_api
* Функция get_amount_rub - Функция, принимающая на вход данные о транзакции и 
возвращающая сумму транзакции в рублях
```
Входной аргумент transaction: словарь, представляющий собой данные о транзакции
Возвращаемое значение - сумма транзакции в рублях
```

#### Модуль generators:
* Функция filter_by_currency - предназначена для сортировки списка словарей, представляющих собой транзакции
по валюте транзакции (по умолчанию - USD)
```
Входной аргумент list_of_transactions: список словарей, представляющих собой транзакции
transaction_currency: строка, представляющая собой ключ словаря валюты транзакции. По умолчанию - USD
Возвращаемое значение - словарь, представляющий собой транзакцию, с валютой, соответствующей заданной
```

* Функция transaction_descriptions - функция, принимающая на вход список словарей с транзакциями 
и возвращает описание каждой операции по очереди.
```
Входной аргумент list_of_transactions: список словарей, представляющих собой транзакции
Возвращаемое значение - описание транзакции
```

* Функция card_number_generator - функция-генератор, возвращающая номера карт 
в формате ХХХХ ХХХХ ХХХХ ХХХХ из диапазона чисел от start_number до stop_number.
Допустимый диапазон номеров карт - от 0000 0000 0000 0001 до 9999 9999 9999 9999 
```
Аргументы:
start_number: начальный номер диапазона генерации
stop_number: конечный номер диапазона генерации
Возвращаемое значение - номер карты в заданном диапазоне
```

#### Модуль masks:
* функция get_masks_card_number - предназначена для маскирования номера банковской карты
```
Входной аргумент (номер карты): 7000792289606361
Вызов функции: get_masks_card_number(7000792289606361)
Возвращаемый маскированный номер карты: 7000 79** **** 6361
```
* функция get_masks_account - предназначена для маскирования номера банковского счета
```
Входной аргумент (номер счета): 73654108430135874305
Вызов функции: get_masks_account(73654108430135874305)
Возвращаемый маскированный номер счета: **4305
```
#### Модуль processing:
* функция filter_by_state - предназначена для сортировки списка словарей по ключу state. 
    По умолчанию - ключ state - 'EXECUTED'
```
Входной аргумент (список словарей): 
[{'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'}, 
{'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'}, 
{'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'}, 
{'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'}]

Вызов функции c параметром по умолчанию 'EXECUTED': 
filter_by_state(list_of_dicts)

Вызов функции c передачей второго аргумента: 
filter_by_state(list_of_dicts, 'CANCELLED')

Возвращаемый список словарей: 
# Выход функции со статусом по умолчанию 'EXECUTED'
[{'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'}, 
{'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'}]

# Выход функции, если вторым аргументов передано 'CANCELED'
[{'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'}, 
{'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'}]
```

* функция sort_by_date - предназначена для сортировки списка словарей по дате. 
    По умолчанию - по убыванию. 
```
Входной аргумент (список словарей): 
[{'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'}, 
{'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'}, 
{'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'}, 
{'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'}]

Вызов функции (с сортировкой по умолчанию - по убыванию даты):
sort_by_date(list_of_dicts)
Вызов функции (с сортировкой по возрастанию даты):
sort_by_date(list_of_dicts, False)

# Выход функции (сортировка по убыванию, т. е. сначала самые последние операции)
[{'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'}, 
{'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'}, 
{'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'}, 
{'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'}]

# Выход функции (сортировка по возрастанию, т. е. сначала самые давние операции)
[{'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'},
{'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'},
{'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'},
{'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'}]
```

* Функция get_transactions_description_sorted_list - функция, принимающая на вход список словарей, 
представляющих собой транзакции, строку поиска, по которой осуществляется сортировка исходного списка. 
Функция возвращает список словарей, представляющий собой транзакции, отсортированные по ключевой фразе

* Функция count_transactions_categories - функция, принимающая список словарей с данными о банковских операциях 
и список категорий операций. 
Функция возвращает словарь, в котором ключи — это названия категорий, а значения — 
это количество операций в каждой категории

#### Модуль utils:
* Функция get_operation - функция, получающая данные о транзакциях из json-файла
```
входной аргумент json_path: - путь к json-файлу
возвращаемое значение - список словарей, представляющих собой транзакции
```

#### Модуль widget:
* функция masks_account_card - предназначена для маскирования номера счета или карты
```
Входной аргумент: 'Visa Platinum 7000792289606361'
Вызов функции: masks_account_card('Visa Platinum 7000792289606361')
Возвращаемый маскированный номер карты: 'Visa Platinum 7000 79** **** 6361'

Входной аргумент (номер счета): 'Счет 73654108430135874305'
Вызов функции: masks_account_card("Счет 73654108430135874305")
Возвращаемый маскированный номер счета: 'Счет **4305'
```
* функция get_date - функция, возвращающая дату в формате ДД.ММ.ГГГГ
```
Входной аргумент: '2024-03-11T02:26:18.671407'
Вызов функции: get_date('2024-03-11T02:26:18.671407')
Возвращаемое значение: '11.03.2024'
```

### Пакет tests
Содержит модули для тестирования реализованных функций.
#### Модуль test_csv_excel
Содержит функции для тестирования модуля csv_excel.py
* test_get_transactions_csv_no_path - функция, тестирующая работу функции get_transactions_csv 
с отсутствующим путем к файлу csv
* test_get_transactions_csv_no_file - функция, тестирующая работу функции get_transactions_csv 
с переданным путем к файлу csv, но с отсутствующим файлом
* test_get_transaction_csv - функция, тестирующая работу функции get_transactions_csv 
с переданным путем к файлу csv, c существующим файлом и мокированием функции read_csv
* test_get_transactions_excel_no_path - функция, тестирующая работу функции get_transactions_excel 
с отсутствующим путем к файлу excel
* test_get_transactions_excel_no_file - функция, тестирующая работу функции get_transactions_excel 
с переданным путем к файлу excel, но с отсутствующим файлом
* test_get_transaction_excel - функция, тестирующая работу функции get_transactions_excel 
с переданным путем к файлу excel, c существующим файлом и мокированием функции read_excel

#### Модуль test_decorators
Содержит функции для тестирования модуля decorators.py
* func1 - Тестовая функция №1
* test_console_ok - Функция, тестирующая работу декоратора с консолью при успешной работе декорированной функции
* func2 - Тестовая функция №2
* test_console_error - Функция, тестирующая работу декоратора с консолью при возбуждении ошибок декорированной функции
* func3 - Тестовая функция №3
* test_file_ok - Функция, тестирующая работу декоратора с выводом лога в файл при успешной работе декорированной функции
* func4 - Тестовая функция №4
* test_file_error - Функция, тестирующая работу декоратора с выводом лога в файл при возбуждении ошибок 
декорированной функции
* func5 - Тестовая функция №5
* test_filename_error - Функция, тестирующая работу декоратора при возбуждении ошибки декоратора

#### Модуль test_external_api
Содержит функции для тестирования модуля external_api:
* test_get_amount_rub_for_rub - функция, тестирующая работу функции get_amount_rub с транзакцией в рублях
* test_get_amount_rub_for_usd - функция, тестирующая работу функции get_amount_rub с транзакцией в долларах
Тест использует мокирование запроса к API конвертации валют

#### Модуль test_generators
Содержит функции для тестирования функций модуля generators.py
* get_usd_sorted_transactions - Фикстура, возвращающая список транзакций, отсортированный по валюте USD
* test_filter_by_currency_default - Функция, тестирующая функцию filter_by_currency c фильтрацией списка 
по валюте USD (по умолчанию)
* test_filter_by_currency_usd - Функция, тестирующая функцию filter_by_currency c фильтрацией списка по валюте USD
* get_rub_sorted_transactions - Фикстура, возвращающая список транзакций, отсортированный по валюте RUB
* test_filter_by_currency_rub - Функция, тестирующая функцию filter_by_currency c фильтрацией списка по валюте RUB
* test_filter_by_currency_none - Функция, тестирующая функцию filter_by_currency c фильтрацией списка по валюте, 
отсутствующей в списке
* test_filter_by_currency_empty_list - Функция, тестирующая функцию filter_by_currency c фильтрацией пустого списка
* test_transaction_descriptions - Функция, тестирующая функцию transaction_descriptions
* test_card_number_generator - Функция, тестирующая работу функции card_number_generator с валидными аргументами
* test_card_number_generator_errors - Функция, тестирующая работу функции card_number_generator 
с ошибочными значениями

#### Модуль test_masks
Содержит функции для тестирования функций модуля masks.py
* test_masks_card_number_valid_int - Функция, тестирующая работу функции get_masks_card_number в целочисленном формате
* test_masks_card_number_valid_str - Функция, тестирующая работу функции get_masks_card_number в формате строки
* test_masks_card_number_invalid_data_type - Функция, тестирующая работу функции get_masks_card_number 
c неверным типом данных
* test_masks_card_number_invalid_forma - Функция, тестирующая работу функции get_masks_card_number 
c неверным форматом карты
* test_masks_card_number_empty_input - Функция, тестирующая работу функции get_masks_card_number c пустой строкой
* test_masks_card_number_parametrize - Функция, тестирующая работу функции get_masks_card_number 
c различными входными данными
* test_masks_account_parametrize - Функция, тестирующая работу функции get_masks_account c различными входными данными

#### Модуль test_processing
Содержит функции для тестирования функций модуля processing.py
* test_filter_by_state_exceptions - Функция, тестирующая работу функции filter_by_state с неверным типом данных 
или с отсутствующим ключом state
* test_filter_by_state_default_state - Функция, тестирующая работу функции filter_by_state 
с параметром по умолчанию state = EXECUTED, присутствующем в элементах списка
* test_filter_by_state_w_state_param_cancelled - Функция, тестирующая работу функции filter_by_state 
с параметром state = CANCELED
* test_filter_by_state_wo_state_executed_in_list - Функция, тестирующая работу функции filter_by_state 
с параметром state = PROCESSING
* test_sort_by_date_exceptions - Функция, тестирующая работу функции filter_by_state с неверным типом данных 
или с отсутствующим ключом state
* test_sort_by_date_default_sorting - Функция, тестирующая работу функции sort_by_date 
с параметром по умолчанию True (по убыванию даты)
* test_sort_by_date_rising_sorting - Функция, тестирующая работу функции sort_by_date с сортировкой по возрастанию даты
* test_sort_by_date_rising_sorting_equal_date - Функция, тестирующая работу функции sort_by_date 
с сортировкой по возрастанию даты
* test_sort_by_date_incorrect_date - Функция, тестирующая работу функции sort_by_date с некорректной датой
* get_list_of_transactions - Фикстура, возвращающая тестовый список транзакций с описанием
* get_list_of_transactions_sorted_by_keyword - Фикстура, возвращающая тестовый список транзакций, 
отсортированный по ключевому слову 'перевод'
* test_get_transactions_description_sorted_list - Функция, тестирующая работу функции get_transactions_description_sorted_list 
с сортировкой по ключевому слову, присутствующему в описании
* test_get_transactions_description_sorted_list_not_in_description - Функция, тестирующая работу функции get_transactions_description_sorted_list 
с сортировкой по ключевому слову, отсутствующему в описании
* get_list_of_transaction_categories - Фикстура, возвращающая тестовый список категорий транзакций
* get_dict_of_transaction_categories - Фикстура, возвращающая словарь категорий транзакций с подсчитанными количеством транзакций
* test_count_transactions_categories - Функция, тестирующая работу функции count_transactions_categories с подсчетом по категориям в списке
* get_list_of_transaction_categories_not_in_list_of_transactions - Фикстура, возвращающая тестовый список категорий транзакций
* get_dict_of_transaction_categories_not_in_list_of_transactions - Фикстура, возвращающая словарь категорий транзакций
* test_count_transactions_categories_not_in_list - Функция, тестирующая работу функции count_transactions_categories 
с подсчетом по категориям в списке

#### Модуль test_utils
Содержит функции для тестирования модуля utils
* test_get_operation_no_path - функция, тестирующая работу функции get_operation с отсутствующим путем к файлу
* test_get_operation_no_file - функция, тестирующая работу функции get_operation с путем к файлу json, но без файла
* test_get_operation - функция, тестирующая работу функции get_operation с json-файлом 

#### Модуль test_widget
Содержит функции для тестирования функций модуля widget.py
* test_masks_account_card_parametrize - Функция, тестирующая работу функции get_masks_account 
c различными входными данными
* test_get_date - Функция, тестирующая работу функции get_date c различными входными данными

### Файл main.py
Файл, содержащий реализующий основную логику приложения.

## Использование:

1. Установите проект в локальный репозиторий.
2. Используйте реализованные функции для управления данными о банковском аккаунте - маскирование номера счета, карты, 
номера аккаунта, сортировка операций по дате, статусу.

## Документация:

Для получения дополнительной информации обратитесь к README.md.

## Лицензия:

Этот проект лицензирован по лицензии MIT.



